{"ast":null,"code":"var _jsxFileName = \"/Users/sanami/Desktop/react/webgl/src/pages/2.js\";\nimport React, { Suspense, useEffect, useMemo } from \"react\";\nimport { OrbitControls, Environment } from '@react-three/drei';\nimport { useRef } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport PageNation from \"../components/PageNation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Num1 = props => {\n  var _s = $RefreshSig$(),\n      _s2 = $RefreshSig$();\n\n  function Instances({\n    count = 9,\n    temp = new THREE.Object3D()\n  }) {\n    _s();\n\n    const ref = useRef();\n    useFrame((state, delta) => ref.current.rotation.z -= 0.001);\n    useEffect(() => {\n      // Set positions\n      for (let i = 0; i < count; i++) {\n        const id = i++;\n        temp.position.set(0, 0, i);\n        temp.scale.set(i, i, i);\n        temp.updateMatrix();\n        ref.current.setMatrixAt(id, temp.matrix);\n      } // Update the instance\n      // ref.current.instanceMatrix.needsUpdate = true\n\n    }, []);\n    return /*#__PURE__*/_jsxDEV(\"instancedMesh\", {\n      ref: ref,\n      args: [null, null, count],\n      scale: 0.1,\n      rotation: [0, 0, Math.PI / 2],\n      children: [/*#__PURE__*/_jsxDEV(\"ringBufferGeometry\", {\n        args: [5, -5, 1]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"meshPhongMaterial\", {\n        color: 'dimgray',\n        transparent: true,\n        opacity: '0.4'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }, this);\n  }\n\n  _s(Instances, \"74ow49cg/b996Nhoinp/oAbh9AM=\", false, function () {\n    return [useFrame];\n  });\n\n  ;\n\n  function Fireflies({\n    count = 40\n  }) {\n    _s2();\n\n    const shader = useRef();\n    const [positionArray, scaleArray] = useMemo(() => {\n      const positionArray = new Float32Array(count * 3);\n      const scaleArray = new Float32Array(count);\n\n      for (let i = 0; i < count; i++) {\n        new THREE.Vector3((Math.random() - 0.5) * 4, Math.random() * 1.5, (Math.random() - 0.5) * 4).toArray(positionArray, i * 3);\n        scaleArray[i] = Math.random();\n      }\n\n      return [positionArray, scaleArray];\n    }, [count]);\n    useFrame((state, delta) => shader.current.time += delta / 2);\n    return /*#__PURE__*/_jsxDEV(\"points\", {\n      children: [/*#__PURE__*/_jsxDEV(\"bufferGeometry\", {\n        children: [/*#__PURE__*/_jsxDEV(\"bufferAttribute\", {\n          attachObject: ['attributes', 'position'],\n          count: count,\n          array: positionArray,\n          itemSize: 3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"bufferAttribute\", {\n          attachObject: ['attributes', 'aScale'],\n          count: count,\n          array: scaleArray,\n          itemSize: 1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"fireflyMaterial\", {\n        ref: shader,\n        transparent: true,\n        depthWrite: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)]\n    }, count, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this);\n  }\n\n  _s2(Fireflies, \"WwSV4JLkxmacG3M9usZN6AucJjQ=\", false, function () {\n    return [useFrame];\n  });\n\n  ;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [props.num, \" / 365\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"daily-canvas\",\n      children: [/*#__PURE__*/_jsxDEV(Canvas, {\n        shadows: true,\n        performance: {\n          min: 0.5\n        },\n        dpr: [1, 2],\n        camera: {\n          fov: 100,\n          position: [0, 0, 5]\n        },\n        children: /*#__PURE__*/_jsxDEV(Suspense, {\n          fallback: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 41\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(Environment, {\n            preset: \"sunset\",\n            background: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"ambientLight\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Fireflies, {\n            count: 40\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {\n            enablePan: true,\n            enableZoom: true,\n            enableRotate: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"essay\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"source\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"(1) \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"(2) \", /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://www.cinra.net/interview/201404-mumgypsykawakami\",\n              target: \"_blank\",\n              rel: \"noreferrer\",\n              children: \"\\u85E4\\u7530\\u8CB4\\u5927\\xD7\\u5DDD\\u4E0A\\u672A\\u6620\\u5B50\\u306E\\u53EB\\u3073\\u300C\\u307E\\u3060\\u5168\\u7136\\u8A00\\u3044\\u8DB3\\u308A\\u3066\\u306A\\u3044\\u300D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 33\n            }, this), \" 2014/04/03\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"date\",\n          children: \"2021.09.23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(PageNation, {\n      prev: \"archive\",\n      next: \"2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_c = Num1;\nexport default Num1;\n\nvar _c;\n\n$RefreshReg$(_c, \"Num1\");","map":{"version":3,"sources":["/Users/sanami/Desktop/react/webgl/src/pages/2.js"],"names":["React","Suspense","useEffect","useMemo","OrbitControls","Environment","useRef","Canvas","useFrame","THREE","PageNation","Num1","props","Instances","count","temp","Object3D","ref","state","delta","current","rotation","z","i","id","position","set","scale","updateMatrix","setMatrixAt","matrix","Math","PI","Fireflies","shader","positionArray","scaleArray","Float32Array","Vector3","random","toArray","time","num","min","fov"],"mappings":"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","sourcesContent":["import React, { Suspense, useEffect, useMemo } from \"react\";\nimport { OrbitControls, Environment } from '@react-three/drei';\nimport { useRef } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport PageNation from \"../components/PageNation\";\n\nconst Num1 = (props) => {\n\n    function Instances({ count = 9, temp = new THREE.Object3D() }) {\n        const ref = useRef()\n        useFrame((state, delta) => (ref.current.rotation.z -= 0.001))\n\n        useEffect(() => {\n            // Set positions\n            for (let i = 0; i < count; i++) {\n                const id = i++;\n                temp.position.set(0, 0, i);\n                temp.scale.set(i, i, i);\n                temp.updateMatrix()\n                ref.current.setMatrixAt(id, temp.matrix)\n            }\n            // Update the instance\n            // ref.current.instanceMatrix.needsUpdate = true\n        }, [])\n        return (\n            <instancedMesh ref={ref} args={[null, null, count]} scale={0.1} rotation={[0, 0, Math.PI / 2]}>\n                <ringBufferGeometry args={[5, -5, 1]} />\n                <meshPhongMaterial color={'dimgray'} transparent opacity={'0.4'} />\n            </instancedMesh>\n        )\n    };\n\n    function Fireflies({ count = 40 }) {\n        const shader = useRef()\n        const [positionArray, scaleArray] = useMemo(() => {\n            const positionArray = new Float32Array(count * 3)\n            const scaleArray = new Float32Array(count)\n            for (let i = 0; i < count; i++) {\n                new THREE.Vector3((Math.random() - 0.5) * 4, Math.random() * 1.5, (Math.random() - 0.5) * 4).toArray(positionArray, i * 3)\n                scaleArray[i] = Math.random()\n            }\n            return [positionArray, scaleArray]\n        }, [count])\n        useFrame((state, delta) => (shader.current.time += delta / 2))\n        return (\n            <points key={count}>\n                <bufferGeometry>\n                    <bufferAttribute attachObject={['attributes', 'position']} count={count} array={positionArray} itemSize={3} />\n                    <bufferAttribute attachObject={['attributes', 'aScale']} count={count} array={scaleArray} itemSize={1} />\n                </bufferGeometry>\n                <fireflyMaterial ref={shader} transparent depthWrite={false} />\n            </points>\n        )\n    };\n\n\n\n    return (\n        <>\n            <h2>{props.num} / 365</h2>\n            <div className=\"daily-canvas\">\n                <Canvas\n                    shadows\n                    performance={{ min: 0.5 }}\n                    dpr={[1, 2]}\n                    camera={{ fov: 100, position: [0, 0, 5] }}\n                >\n\n                    {/* <ambientLight intensity={0.5} />\n                        <pointLight position={[5, 5, 10]} intensity={0.5} />\n                        <directionalLight position={[10, 10, 5]} color=\"#fff\" intensity={1} /> */}\n                    {/* <color attach=\"background\" args={['#1e2243']} /> */}\n                    {/* <fog attach=\"fog\" args={['#1e2243', 0, 15]} /> */}\n\n                    <Suspense fallback={<span>loading...</span>}>\n                        <Environment preset=\"sunset\" background />\n                        <ambientLight />\n                        {/* <Instances /> */}\n                        <Fireflies count={40}/>\n                        <OrbitControls enablePan={true} enableZoom={true} enableRotate={true} />\n                    </Suspense>\n                </Canvas>\n                <div className=\"essay\">\n                    <h3></h3>\n\n                    <p></p>\n                    <ul className=\"source\">\n                        <li>(1) </li>\n                        <li>(2) <a href=\"https://www.cinra.net/interview/201404-mumgypsykawakami\" target=\"_blank\" rel=\"noreferrer\">藤田貴大×川上未映子の叫び「まだ全然言い足りてない」</a> 2014/04/03</li>\n                    </ul>\n                    <p className=\"date\">2021.09.23</p>\n                </div>\n            </div>\n            <PageNation prev=\"archive\" next=\"2\" />\n        </>\n    );\n}\n\nexport default Num1;"]},"metadata":{},"sourceType":"module"}