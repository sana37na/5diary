{"ast":null,"code":"import _objectSpread from\"/Users/sanami/Desktop/react/webgl/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Suspense,useMemo}from\"react\";// import { OrbitControls } from '@react-three/drei';\nimport{useRef}from'react';import{Canvas,useFrame}from'@react-three/fiber';import*as THREE from'three';import PageNation from\"../components/PageNation\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Num2=function Num2(props){function Particles(_ref){var count=_ref.count;var mesh=useRef();var light=useRef();useFrame(function(state,delta){return mesh.current.rotation.y+=0.001;});var dummy=useMemo(function(){return new THREE.Object3D();},[]);// Generate some random positions, speed factors and timings\nvar particles=useMemo(function(){var temp=[];for(var i=0;i<count;i++){var t=Math.random()*100;var factor=20+Math.random()*100;var speed=0.01+Math.random()/200;var xFactor=-50+Math.random()*100;var yFactor=-50+Math.random()*100;var zFactor=-50+Math.random()*100;temp.push({t:t,factor:factor,speed:speed,xFactor:xFactor,yFactor:yFactor,zFactor:zFactor,mx:0,my:0});}return temp;},[count]);// The innards of this hook will run every frame\nuseFrame(function(state){// Makes the light follow the mouse\n// light.current.position.set(mouse.current[0] / aspect, -mouse.current[1] / aspect, 0)\n// Run through the randomized data to calculate some movement\nparticles.forEach(function(particle,i){var t=particle.t,factor=particle.factor,speed=particle.speed,xFactor=particle.xFactor,yFactor=particle.yFactor,zFactor=particle.zFactor;// There is no sense or reason to any of this, just messing around with trigonometric functions\nt=particle.t+=speed/2;var a=Math.cos(t)+Math.sin(t*1)/10;var b=Math.sin(t)+Math.cos(t*2)/10;var s=Math.cos(t);// particle.mx += (mouse.current[0] - particle.mx) * 0.01\n// particle.my += (mouse.current[1] * -1 - particle.my) * 0.01\n// Update the dummy object\ndummy.position.set(particle.mx/10*a+xFactor+Math.cos(t/10*factor)+Math.sin(t*1)*factor/10,particle.my/10*b+yFactor+Math.sin(t/10*factor)+Math.cos(t*2)*factor/10,particle.my/10*b+zFactor+Math.cos(t/10*factor)+Math.sin(t*3)*factor/10);dummy.scale.set(s,s,s);dummy.rotation.set(s*5,s*5,s*5);dummy.updateMatrix();// And apply the matrix to the instanced item\nmesh.current.setMatrixAt(i,dummy.matrix);});// mesh.current.instanceMatrix.needsUpdate = true\n});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"pointLight\",{ref:light,distance:40,intensity:10,color:\"#7B96B8\"}),/*#__PURE__*/_jsxs(\"instancedMesh\",{ref:mesh,args:[null,null,count],children:[/*#__PURE__*/_jsx(\"dodecahedronGeometry\",{args:[1,1]}),/*#__PURE__*/_jsx(\"meshPhongMaterial\",{color:\"#fff\"})]})]});};function Moon(props){var mesh=useRef();return/*#__PURE__*/_jsxs(\"mesh\",_objectSpread(_objectSpread({},props),{},{ref:mesh,scale:2,children:[/*#__PURE__*/_jsx(\"pointLight\",{position:[0,-8,10],intensity:2.5}),/*#__PURE__*/_jsx(\"icosahedronGeometry\",{args:[6,5]}),/*#__PURE__*/_jsx(\"meshPhongMaterial\",{color:\"#7B96B8\",specular:\"pink\"})]}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[props.num,\" / 365\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"daily-canvas\",children:[/*#__PURE__*/_jsx(Canvas,{shadows:true,performance:{min:0.5},dpr:[1,2],camera:{fov:100,position:[-30,-25,5]},children:/*#__PURE__*/_jsxs(Suspense,{fallback:/*#__PURE__*/_jsx(\"span\",{children:\"loading...\"}),children:[/*#__PURE__*/_jsx(\"hemisphereLight\",{intensity:0.3}),/*#__PURE__*/_jsx(\"ambientLight\",{color:\"pink\",intensity:0.3}),/*#__PURE__*/_jsx(Particles,{count:50}),/*#__PURE__*/_jsx(Moon,{})]})}),/*#__PURE__*/_jsx(PageNation,{prev:\"1\",next:\"3\"})]}),/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"essay\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u6708\\u3068\\u661F\\u306E\\u3042\\u3044\\u3060\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u5922\\u3046\\u3064\\u3064\\u306E\\u304B\\u3089\\u3060\"}),/*#__PURE__*/_jsx(\"p\",{className:\"date\",children:\"2021.09.23\"})]})})]});};export default Num2;","map":{"version":3,"sources":["/Users/sanami/Desktop/react/webgl/src/pages/2.js"],"names":["React","Suspense","useMemo","useRef","Canvas","useFrame","THREE","PageNation","Num2","props","Particles","count","mesh","light","state","delta","current","rotation","y","dummy","Object3D","particles","temp","i","t","Math","random","factor","speed","xFactor","yFactor","zFactor","push","mx","my","forEach","particle","a","cos","sin","b","s","position","set","scale","updateMatrix","setMatrixAt","matrix","Moon","num","min","fov"],"mappings":"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","sourcesContent":["import React, { Suspense, useMemo } from \"react\";\n// import { OrbitControls } from '@react-three/drei';\nimport { useRef } from 'react';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport * as THREE from 'three';\nimport PageNation from \"../components/PageNation\";\n\nconst Num2 = (props) => {\n\n    function Particles({ count }) {\n        const mesh = useRef()\n        const light = useRef()\n        useFrame((state, delta) => (mesh.current.rotation.y += 0.001))\n\n        const dummy = useMemo(() => new THREE.Object3D(), [])\n        // Generate some random positions, speed factors and timings\n        const particles = useMemo(() => {\n            const temp = []\n            for (let i = 0; i < count; i++) {\n                const t = Math.random() * 100\n                const factor = 20 + Math.random() * 100\n                const speed = 0.01 + Math.random() / 200\n                const xFactor = -50 + Math.random() * 100\n                const yFactor = -50 + Math.random() * 100\n                const zFactor = -50 + Math.random() * 100\n                temp.push({ t, factor, speed, xFactor, yFactor, zFactor, mx: 0, my: 0 })\n            }\n            return temp\n        }, [count])\n        // The innards of this hook will run every frame\n        useFrame((state) => {\n            // Makes the light follow the mouse\n            // light.current.position.set(mouse.current[0] / aspect, -mouse.current[1] / aspect, 0)\n            // Run through the randomized data to calculate some movement\n            particles.forEach((particle, i) => {\n                let { t, factor, speed, xFactor, yFactor, zFactor } = particle\n                // There is no sense or reason to any of this, just messing around with trigonometric functions\n                t = particle.t += speed / 2\n                const a = Math.cos(t) + Math.sin(t * 1) / 10\n                const b = Math.sin(t) + Math.cos(t * 2) / 10\n                const s = Math.cos(t)\n                // particle.mx += (mouse.current[0] - particle.mx) * 0.01\n                // particle.my += (mouse.current[1] * -1 - particle.my) * 0.01\n                // Update the dummy object\n                dummy.position.set(\n                    (particle.mx / 10) * a + xFactor + Math.cos((t / 10) * factor) + (Math.sin(t * 1) * factor) / 10,\n                    (particle.my / 10) * b + yFactor + Math.sin((t / 10) * factor) + (Math.cos(t * 2) * factor) / 10,\n                    (particle.my / 10) * b + zFactor + Math.cos((t / 10) * factor) + (Math.sin(t * 3) * factor) / 10\n                )\n                dummy.scale.set(s, s, s)\n                dummy.rotation.set(s * 5, s * 5, s * 5)\n                dummy.updateMatrix()\n                // And apply the matrix to the instanced item\n                mesh.current.setMatrixAt(i, dummy.matrix)\n            })\n            // mesh.current.instanceMatrix.needsUpdate = true\n        })\n        return (\n            <>\n                <pointLight ref={light} distance={40} intensity={10} color=\"#7B96B8\" />\n                <instancedMesh ref={mesh} args={[null, null, count]}>\n                    <dodecahedronGeometry args={[1, 1]} />\n                    <meshPhongMaterial color=\"#fff\" />\n                </instancedMesh>\n            </>\n        )\n    };\n\n    function Moon(props) {\n        const mesh = useRef()\n\n        return (\n            <mesh\n                {...props}\n                ref={mesh}\n                scale={2}\n            >\n                <pointLight position={[0, -8, 10]} intensity={2.5} />\n                <icosahedronGeometry args={[6, 5]} />\n                <meshPhongMaterial color=\"#7B96B8\" specular=\"pink\" />\n            </mesh>)\n    };\n\n\n\n    return (\n        <>\n            <h2>{props.num} / 365</h2>\n            <div className=\"daily-canvas\">\n                <Canvas\n                    shadows\n                    performance={{ min: 0.5 }}\n                    dpr={[1, 2]}\n                    camera={{ fov: 100, position: [-30, -25, 5] }}\n                >\n                    <Suspense fallback={<span>loading...</span>}>\n                        <hemisphereLight intensity={0.3} />\n                        <ambientLight color=\"pink\" intensity={0.3} />\n                        <Particles count={50} />\n                        <Moon />\n                        {/* <OrbitControls enablePan={true} enableZoom={true} enableRotate={true} /> */}\n                    </Suspense>\n                </Canvas>\n            <PageNation prev=\"1\" next=\"3\" />\n            </div>\n            <>\n            <div className=\"essay\">\n                <h3>月と星のあいだ</h3>\n\n                <p>夢うつつのからだ</p>\n                {/* <ul className=\"source\">\n                        <li>(1) </li>\n                        <li>(2) <a href=\"https://www.cinra.net/interview/201404-mumgypsykawakami\" target=\"_blank\" rel=\"noreferrer\">藤田貴大×川上未映子の叫び「まだ全然言い足りてない」</a> 2014/04/03</li>\n                    </ul> */}\n                <p className=\"date\">2021.09.23</p>\n            </div>\n            </>\n        </>\n    );\n}\n\nexport default Num2;"]},"metadata":{},"sourceType":"module"}